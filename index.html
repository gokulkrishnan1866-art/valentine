<!doctype html>
<html lang="en">
<head>
  <meta name="robots" content="noindex, nofollow">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Our Story üíó</title>

  <style>
    :root{
      --pink1:#ffb6c1;
      --pink2:#ffc0cb;
      --glass: rgba(255,255,255,.18);
      --shadow: 0 22px 50px rgba(0,0,0,.25);
    }

    html,body{height:100%;margin:0}
    body{
      overflow:hidden;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background: linear-gradient(180deg, var(--pink1), var(--pink2));
    }

    /* floating hearts background */
    .heart{
      position:fixed; bottom:-60px; left:0;
      font-size:22px;
      opacity:.55;
      animation: floatUp linear infinite;
      pointer-events:none;
      filter: drop-shadow(0 6px 12px rgba(0,0,0,.15));
      z-index:1;
    }
    @keyframes floatUp{
      from{ transform:translateY(0) translateX(0) scale(1); opacity:.55; }
      to{ transform:translateY(-120vh) translateX(40px) scale(1.2); opacity:0; }
    }

    /* main stage */
    #stage{
      position:relative;
      height:100%;
      width:100%;
      display:flex;
      justify-content:center;
      align-items:center;
      z-index:2;
      padding: 18px;
      box-sizing:border-box;
    }

    .frame{
      width:min(1200px, 96vw);
      height:min(760px, 92vh);
      background: rgba(255,255,255,.16);
      border: 1px solid rgba(255,255,255,.22);
      border-radius: 26px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      overflow:hidden;
      position:relative;
    }

    /* caption on top ‚Äì NO blur panel */
    .caption{
      position:absolute;
      top:16px; left:18px; right:18px;
      text-align:center;
      color:#fff;
      text-shadow: 0 6px 18px rgba(0,0,0,.55);
      z-index:5;
      padding: 0;
    }
    .caption .ru{font-size:20px; font-weight:700; margin:0 0 6px 0;}
    .caption .en{font-size:16px; font-weight:600; margin:0; opacity:.95;}

    /* media area */
    .mediaWrap{
      position:absolute;
      inset: 70px 18px 72px 18px; /* leaves room for caption & footer */
      display:flex;
      justify-content:center;
      align-items:center;
      border-radius: 20px;
      overflow:hidden;
      background: rgba(255,255,255,.10);
    }

    img, video{
      width:100%;
      height:100%;
      object-fit: contain;       /* shows full image/video */
      object-position:center;
      border-radius: 20px;
      display:block;
      background: rgba(0,0,0,.08);
    }

    /* slide animation */
    .fadeUpIn{
      animation: fadeUp .9s ease both;
    }
    @keyframes fadeUp{
      from{ opacity:0; transform: translateY(26px); }
      to{ opacity:1; transform: translateY(0); }
    }

    /* footer */
    .footer{
      position:absolute;
      bottom:14px; left:18px; right:18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      color:#fff;
      text-shadow: 0 6px 18px rgba(0,0,0,.55);
      z-index:6;
      font-weight:700;
    }
    .pill{
      background: rgba(255,255,255,.18);
      border: 1px solid rgba(255,255,255,.22);
      padding: 10px 14px;
      border-radius: 999px;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .small{font-size:13px; font-weight:700; opacity:.95}

    button{
      border:none;
      background:#ff3f86;
      color:#fff;
      font-weight:800;
      padding: 12px 18px;
      border-radius: 999px;
      cursor:pointer;
      box-shadow: 0 14px 30px rgba(255,63,134,.35);
    }
    button:active{ transform: translateY(1px); }

    /* start overlay (fixes Safari autoplay limits) */
    #startOverlay{
      position:fixed; inset:0;
      display:flex;
      justify-content:center;
      align-items:center;
      background: rgba(0,0,0,.35);
      z-index:999;
    }
    .startCard{
      width:min(520px, 92vw);
      background: rgba(255,255,255,.18);
      border: 1px solid rgba(255,255,255,.22);
      border-radius: 26px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 22px 20px;
      text-align:center;
      color:#fff;
      text-shadow: 0 6px 18px rgba(0,0,0,.55);
    }
    .startCard h1{margin:0 0 10px 0; font-size:26px;}
    .startCard p{margin:0 0 16px 0; font-weight:700; opacity:.95;}

    /* Final Valentine slide */
    #valentineBox{
      width:100%;
      height:100%;
      display:flex;
      justify-content:center;
      align-items:center;
      flex-direction:column;
      color:#fff;
      text-shadow: 0 6px 18px rgba(0,0,0,.55);
      gap:14px;
    }
    #valentineBox h2{margin:0; font-size:36px;}
    #hug{
      display:none;
      max-width:min(520px, 86%);
      max-height: 52%;
      border-radius: 22px;
      box-shadow: var(--shadow);
      background: rgba(255,255,255,.10);
      padding: 10px;
    }
    /* PowerPoint / cinematic zoom-out */
#stage img {
  max-width: 90%;
  max-height: 85vh;
  width: auto;
  height: auto;
  object-fit: contain;
  display: block;
  margin: auto;

  transform: scale(1.12);
  animation: zoomOut 6s ease-in-out forwards;
}
    /* animation must be OUTSIDE */
@keyframes zoomOut {
  from { 
    transform: scale(1.12); 
  }
  to  { 
    transform: scale(1.0); 
  }
}
    /* ===== Password intro background ===== */
#lockBg{
  position: fixed;
  inset: 0;
  display: none;
  z-index: 999999;
  background: radial-gradient(circle at top, rgba(255,180,210,.55), rgba(255,140,180,.25));
}

#lockCard{
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%,-50%);
  padding: 26px 28px;
  border-radius: 18px;
  background: rgba(255,255,255,.18);
  backdrop-filter: blur(12px);
  text-align: center;
}
#lockCard h1{
  margin: 0 0 10px;
  font-size: 26px;
  text-shadow: 0 2px 12px rgba(0,0,0,.25);
}

#lockCard p{
  margin: 0;
  opacity: .95;
  line-height: 1.35;
  text-shadow: 0 2px 12px rgba(0,0,0,.2);
}

/* floating hearts */
.lock-heart{
  position: fixed;
  bottom: -40px;
  font-size: 18px;
  opacity: .35;
  animation: floatUp linear infinite;
  z-index: 999998;
  pointer-events:none;
}
@keyframes floatUp{
  from { transform: translateY(0) translateX(0); }
  to   { transform: translateY(-110vh) translateX(40px); }
}
  </style>
</head>

<body>
  <div id="lockBg">
  <div id="lockCard">
    <h1>For you, with love üíó</h1>
    <p>Enter the secret word to open our story ‚ú®</p>
  </div>
</div>
  <script>
  const correctPassword = "–ì–û–ö–£–õ–¢–ê–ù–¨–Ø143@";

  // 1) show background first
  const lockBg = document.getElementById("lockBg");
  lockBg.style.display = "block";

  // 2) let browser paint one frame, then prompt
  requestAnimationFrame(() => {
    setTimeout(() => {
      const userPassword = prompt("üíó Enter the secret word");

      if (userPassword !== correctPassword) {
        alert("‚ùå Wrong password");
        location.reload();
        return;
      }

      // success: hide lock screen
      lockBg.style.display = "none";
    }, 50);
  });
</script>
  <!-- hearts -->
  <script>
    for(let i=0;i<26;i++){
      const h=document.createElement('div');
      h.className='heart';
      h.textContent='‚ù§';
      h.style.left = (Math.random()*100)+'vw';
      h.style.animationDuration = (5+Math.random()*6)+'s';
      h.style.animationDelay = (Math.random()*3)+'s';
      h.style.fontSize = (16+Math.random()*18)+'px';
      document.addEventListener('DOMContentLoaded', ()=>document.body.appendChild(h));
    }
  </script>

  <div id="startOverlay">
    <div class="startCard">
      <h1>Our Story üíó</h1>
      <p>Tap START once ‚Äî it enables music + autoplay on Safari.</p>
      <button id="startBtn">START ‚ñ∂Ô∏è</button>
      <div class="small" style="margin-top:10px;opacity:.9;">
        Videos will be muted so our background song stays.
      </div>
    </div>
  </div>

  <div id="stage">
    <div class="frame">
      <div class="caption">
        <p class="ru" id="capRU"></p>
        <p class="en" id="capEN"></p>
      </div>

      <div class="mediaWrap" id="mediaWrap"></div>

      <div class="footer">
        <div class="pill">
          <span class="small" id="chapter">Chapter</span>
        </div>
        <div class="pill">
          <span class="small" id="counter">1 / 1</span>
        </div>
        <div class="pill">
          <button id="musicBtn">Music ‚ô™</button>
        </div>
      </div>
    </div>
  </div>

  <audio id="bgm" src="music.mp3" loop preload="auto"></audio>

  <script>
    // ======= ORDER (updated per your rules for video05‚Äìvideo09) =======
    const sequence = [
      {type:'text', ru:'–ò—Å—Ç–æ—Ä–∏—è –¥–≤—É—Ö –∫—Ä–∞—Å–∏–≤—ã—Ö –ª—é–¥–µ–π‚Ä¶', en:'The story of two beautiful souls‚Ä¶', chapter:'Prologue'},

      // Online
      {type:'img',  src:'photo1.jpg',  ru:'–ú—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å –æ–Ω–ª–∞–π–Ω.', en:'We met online.', chapter:'Online'},
      {type:'img',  src:'photo2.jpg',  ru:'–°–Ω–∞—á–∞–ª–∞ –±—ã–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.', en:'First, it was texts.', chapter:'Online'},
      {type:'img',  src:'photo3.jpg',  ru:'–ü–æ—Ç–æ–º –≥–æ–ª–æ—Å ‚Äî –∏ —Å—Ç–∞–ª–æ —Ç–µ–ø–ª–µ–µ.', en:'Then voice calls ‚Äî and it felt warmer.', chapter:'Online'},
      {type:'img',  src:'photo4.jpg',  ru:'–ú—ã —Å–º–µ—è–ª–∏—Å—å –¥–æ —Å–ª—ë–∑.', en:'We laughed until it hurt.', chapter:'Online'},
      {type:'img',  src:'photo5.jpg',  ru:'–ò–Ω–æ–≥–¥–∞ –±—ã–ª–æ —Ç—è–∂–µ–ª–æ‚Ä¶', en:'Sometimes it was hard‚Ä¶', chapter:'Online'},
      {type:'img',  src:'photo6.jpg',  ru:'–ù–æ –º—ã –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å —Ä—è–¥–æ–º.', en:'But we stayed close.', chapter:'Online'},
      {type:'img',  src:'photo7.jpg',  ru:'–ù–æ—á–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤.', en:'Nights full of talks.', chapter:'Online'},
      {type:'img',  src:'photo8.jpg',  ru:'–ò –º–∞–ª–µ–Ω—å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã —Å—á–∞—Å—Ç—å—è.', en:'And small moments of happiness.', chapter:'Online'},

      {type:'video',src:'video01.mp4', ru:'–í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ ‚Äî –∏ —Ç–≤–æ—è —É–ª—ã–±–∫–∞.', en:'Video calls ‚Äî and your smile.', chapter:'Online'},
      {type:'video',src:'video02.mp4', ru:'–°–º–µ—à–Ω—ã–µ –º–∏–Ω—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è.', en:'Funny moments that stay forever.', chapter:'Online'},

      {type:'img',  src:'photo9.jpg',  ru:'–ú—ã –¥–µ–ª–∏–ª–∏—Å—å –≤—Å–µ–º.', en:'We shared everything.', chapter:'Online'},
      {type:'img',  src:'photo10.jpg', ru:'–î–∞–∂–µ –º–æ–ª—á–∞–Ω–∏–µ –±—ã–ª–æ —É—é—Ç–Ω—ã–º.', en:'Even silence felt safe.', chapter:'Online'},
      {type:'img',  src:'photo11.jpg', ru:'–î–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è.', en:'Days of waiting.', chapter:'Online'},
      {type:'img',  src:'photo12.jpg', ru:'–ò –≤–µ—Ä–∞, —á—Ç–æ –º—ã –≤—Å—Ç—Ä–µ—Ç–∏–º—Å—è.', en:'And belief we would meet.', chapter:'Online'},

      {type:'video',src:'video03.mp4', ru:'–ï—â—ë –æ–¥–∏–Ω –∑–≤–æ–Ω–æ–∫‚Ä¶ –±–ª–∏–∂–µ –∫ –≤—Å—Ç—Ä–µ—á–µ.', en:'Another call‚Ä¶ closer to meeting.', chapter:'Online'},
      {type:'video',src:'video04.mp4', ru:'–ú—ã —É–∂–µ –±—ã–ª–∏ ‚Äú–º—ã‚Äù.', en:'We were already ‚Äúus‚Äù.', chapter:'Online'},

      // Meeting
      {type:'img',  src:'photo14.jpg', ru:'–ò –≤–æ—Ç‚Ä¶ –¥–µ–Ω—å –ø—Ä–∏—à—ë–ª.', en:'And then‚Ä¶ the day arrived.', chapter:'Meeting'},
      {type:'img',  src:'photo15.jpg', ru:'–Ø –≥–æ—Ç–æ–≤–∏–ª—Å—è —É–≤–∏–¥–µ—Ç—å —Ç–µ–±—è.', en:'I prepared myself to see you.', chapter:'Meeting'},
      {type:'img',  src:'photo16.jpg', ru:'–°–µ—Ä–¥—Ü–µ –±–∏–ª–æ —Å–∏–ª—å–Ω–µ–µ.', en:'My heart beat louder.', chapter:'Meeting'},
      {type:'img',  src:'photo13.jpg', ru:'–ù–∞–∫–æ–Ω–µ—Ü ‚Äî —Ä—è–¥–æ–º.', en:'Finally ‚Äî together.', chapter:'Meeting'},
      {type:'img',  src:'photo17.jpg', ru:'–ü–µ—Ä–≤—ã–π –Ω–∞—Å—Ç–æ—è—â–∏–π –º–æ–º–µ–Ω—Ç.', en:'Our first real moment.', chapter:'Meeting'},

      // Together (travel etc.)
      {type:'img',  src:'photo18.jpg', ru:'–° —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –º—ã —à–ª–∏ –≤–º–µ—Å—Ç–µ.', en:'From that moment, we walked together.', chapter:'Together'},
      {type:'img',  src:'photo19.jpg', ru:'–ù–æ–≤—ã–µ —É–ª–∏—Ü—ã, –Ω–æ–≤—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è.', en:'New streets, new memories.', chapter:'Together'},
      {type:'img',  src:'photo20.jpg', ru:'–ò –º–∏—Ä —Å—Ç–∞–ª –º—è–≥—á–µ.', en:'And the world became softer.', chapter:'Together'},
      {type:'img',  src:'photo21.jpg', ru:'–ü–ª–µ—á–æ–º –∫ –ø–ª–µ—á—É.', en:'Side by side.', chapter:'Together'},
      {type:'img',  src:'photo22.jpg', ru:'–°—á–∞—Å—Ç—å–µ ‚Äî —ç—Ç–æ ‚Äú–º—ã‚Äù.', en:'Happiness is ‚Äúus‚Äù.', chapter:'Together'},
      {type:'img',  src:'photo23.jpg', ru:'–ü—Ä–æ—Å—Ç–æ –±—ã—Ç—å —Ä—è–¥–æ–º.', en:'Just being close.', chapter:'Together'},
      {type:'img',  src:'photo24.jpg', ru:'–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –∫–∞–∫ –ø–æ–¥–∞—Ä–æ–∫.', en:'Every day felt like a gift.', chapter:'Together'},

      // ‚úÖ video05 after photo24
      {type:'video',src:'video05.mp4', ru:'–ï—â—ë –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç ‚Äî –Ω–∞–≤—Å–µ–≥–¥–∞.', en:'Another moment ‚Äî forever.', chapter:'Together'},

      {type:'img',  src:'photo25.jpg', ru:'–í–∑–≥–ª—è–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –≥–æ–≤–æ—Ä—è—Ç –≤—Å—ë.', en:'Looks that say everything.', chapter:'Together'},
      {type:'img',  src:'photo26.jpg', ru:'–°–º–µ—Ö, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∑–∞–±—ã–≤–∞–µ—Ç—Å—è.', en:'Laughter you never forget.', chapter:'Together'},
      {type:'img',  src:'photo27.jpg', ru:'–ò –ø–ª–∞–Ω—ã –Ω–∞ –¥–∞–ª—å—à–µ.', en:'And plans for what‚Äôs next.', chapter:'Together'},
      {type:'img',  src:'photo28.jpg', ru:'–° —Ç–æ–±–æ–π ‚Äî —Å–ø–æ–∫–æ–π–Ω–æ.', en:'With you ‚Äî I feel calm.', chapter:'Together'},
      {type:'img',  src:'photo29.jpg', ru:'–ù–µ–±–æ –±—ã–ª–æ –∫—Ä–∞—Å–∏–≤–µ–µ.', en:'The sky looked prettier.', chapter:'Together'},

      // ‚úÖ video06 after photo29
      {type:'video',src:'video06.mp4', ru:'–° —Ç–æ–±–æ–π –≤—Å—ë –∏–º–µ–µ—Ç —Å–º—ã—Å–ª.', en:'With you, everything makes sense.', chapter:'Together'},

      {type:'img',  src:'photo30.jpg', ru:'–ú–æ—Ä–µ ‚Äî —Ç–µ–ø–ª–µ–µ.', en:'The sea felt warmer.', chapter:'Together'},
      {type:'img',  src:'photo31.jpg', ru:'–ê –≤—Ä–µ–º—è ‚Äî –±—ã—Å—Ç—Ä–µ–µ.', en:'And time ‚Äî faster.', chapter:'Together'},
      {type:'img',  src:'photo32.jpg', ru:'–Ø –≤—ã–±–∏—Ä–∞—é —Ç–µ–±—è —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞.', en:'I choose you again and again.', chapter:'Together'},
      {type:'img',  src:'photo33.jpg', ru:'–ü—É—Å—Ç—å –±—É–¥–µ—Ç –µ—â—ë –±–æ–ª—å—à–µ ‚Äú–Ω–∞—Å‚Äù.', en:'Let there be more of ‚Äúus‚Äù.', chapter:'Together'},
      {type:'img',  src:'photo34.jpg', ru:'–ï—â—ë –±–æ–ª—å—à–µ –¥–æ—Ä–æ–≥.', en:'More roads ahead.', chapter:'Together'},
      {type:'img',  src:'photo35.jpg', ru:'–ï—â—ë –±–æ–ª—å—à–µ –∑–∞–∫–∞—Ç–æ–≤.', en:'More sunsets.', chapter:'Together'},
      {type:'img',  src:'photo36.jpg', ru:'–ò –ø—Ä–æ—Å—Ç—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤.', en:'And simple moments.', chapter:'Together'},
      {type:'img',  src:'photo37.jpg', ru:'–ö–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –≤–µ—á–Ω–æ—Å—Ç—å—é.', en:'That turn into forever.', chapter:'Together'},
      {type:'img',  src:'photo38.jpg', ru:'–¢—ã ‚Äî –º–æ–π –¥–æ–º.', en:'You are my home.', chapter:'Together'},
      {type:'img',  src:'photo39.jpg', ru:'–ì–¥–µ –±—ã –º—ã –Ω–∏ –±—ã–ª–∏.', en:'Wherever we are.', chapter:'Together'},
      {type:'img',  src:'photo40.jpg', ru:'–ò —è —Ö–æ—á—É –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å.', en:'And I want to continue.', chapter:'Together'},

      // ‚úÖ video07 after photo40, then video08, then video09
      {type:'video',src:'video07.mp4', ru:'–Ø –ª—é–±–ª—é –Ω–∞—à—É –∏—Å—Ç–æ—Ä–∏—é.', en:'I love our story.', chapter:'Together'},
      {type:'video',src:'video08.mp4', ru:'–ò —Ö–æ—á—É –µ—â—ë –≥–ª–∞–≤—ã.', en:'And I want more chapters.', chapter:'Together'},
      {type:'video',src:'video09.mp4', ru:'–í–º–µ—Å—Ç–µ.', en:'Together.', chapter:'Together'},

      {type:'img',  src:'photo41.jpg', ru:'–î–µ—Ä–∂–∞—Ç—å —Ç–≤–æ—é —Ä—É–∫—É.', en:'To hold your hand.', chapter:'Together'},
      {type:'img',  src:'photo42.jpg', ru:'–ò –∏–¥—Ç–∏ –¥–∞–ª—å—à–µ –≤–º–µ—Å—Ç–µ.', en:'And move forward together.', chapter:'Together'},

      // poetic line before Valentine
      {type:'text', ru:'–Ø –≤—Å—ë –µ—â—ë —Ö–æ—á—É –¥–µ—Ä–∂–∞—Ç—å —Ç–µ–±—è –∑–∞ —Ä—É–∫—É‚Ä¶', en:'I still want to hold your hand‚Ä¶', chapter:'Promise'},
      {type:'text', ru:'‚Ä¶–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Ç–æ–±–æ–π –¥–æ —Å–∞–º–æ–≥–æ –∫–æ–Ω—Ü–∞.', en:'‚Ä¶and travel with you till the very end.', chapter:'Promise'},

      // Valentine question alone
      {type:'valentine', chapter:'Final'}
    ];

    // ======= timings =======
    const IMG_MS   = 6500;
    const VIDEO_MS = 9000;

    // DOM
    const mediaWrap = document.getElementById('mediaWrap');
    const capRU = document.getElementById('capRU');
    const capEN = document.getElementById('capEN');
    const counter = document.getElementById('counter');
    const chapterEl = document.getElementById('chapter');
    const bgm = document.getElementById('bgm');
    const startOverlay = document.getElementById('startOverlay');
    const startBtn = document.getElementById('startBtn');
    const musicBtn = document.getElementById('musicBtn');

    let i = 0;
    let timer = null;
    let started = false;

    function clearMedia(){
      while(mediaWrap.firstChild) mediaWrap.removeChild(mediaWrap.firstChild);
    }

    function setCaption(item){
      capRU.textContent = item.ru || '';
      capEN.textContent = item.en || '';
      chapterEl.textContent = `Chapter: ${item.chapter || ''}`;
    }

    function showSlide(index){
      const item = sequence[index];
      clearMedia();
      setCaption(item);
      counter.textContent = `${index+1} / ${sequence.length}`;

      if(item.type === 'img'){
        const img = document.createElement('img');
        img.src = item.src;
        img.alt = '';
        img.className = 'fadeUpIn';
        mediaWrap.appendChild(img);
        scheduleNext(IMG_MS);

      } else if(item.type === 'video'){
        const v = document.createElement('video');
        v.src = item.src;
        v.muted = true;
        v.autoplay = true;
        v.loop = true;
        v.playsInline = true;
        v.preload = "auto";
        v.className = 'fadeUpIn';
        mediaWrap.appendChild(v);
        v.play().catch(()=>{});
        scheduleNext(VIDEO_MS);

      } else if(item.type === 'text'){
        const box = document.createElement('div');
        box.style.width="100%";
        box.style.height="100%";
        box.style.display="flex";
        box.style.flexDirection="column";
        box.style.justifyContent="center";
        box.style.alignItems="center";
        box.style.color="#fff";
        box.style.textShadow="0 6px 18px rgba(0,0,0,.55)";
        box.className = 'fadeUpIn';

        const ru = document.createElement('div');
        ru.style.fontSize="30px";
        ru.style.fontWeight="900";
        ru.style.textAlign="center";
        ru.style.margin="0 16px 12px 16px";
        ru.textContent = item.ru || '';

        const en = document.createElement('div');
        en.style.fontSize="22px";
        en.style.fontWeight="800";
        en.style.textAlign="center";
        en.style.margin="0 16px";
        en.style.opacity=".96";
        en.textContent = item.en || '';

        box.appendChild(ru);
        box.appendChild(en);
        mediaWrap.appendChild(box);
        scheduleNext(IMG_MS);

      } else if(item.type === 'valentine'){
        capRU.textContent = '';
        capEN.textContent = '';
        chapterEl.textContent = 'Chapter: Final';

        const box = document.createElement('div');
        box.id = "valentineBox";
        box.style.position = "relative";
        box.style.minHeight = "200px";
        box.className = 'fadeUpIn';

        const h2 = document.createElement('h2');
        h2.textContent = "–¢—ã —Å—Ç–∞–Ω–µ—à—å –º–æ–µ–π –í–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π –¢–∞–Ω—é—à–∞ ? üíò";
        h2.textContent = "Will you be my Valentine –¢–∞–Ω—é—à–∞ ? üíò";

        const btn = document.createElement('button');
        btn.textContent = "Yes –î–∞ üíñ";
// NO button (runs away)
const noBtn = document.createElement('button');
noBtn.textContent = "No –ù–µ—Ç üò≠";

noBtn.style.position = "absolute";
noBtn.style.left = "50%";
noBtn.style.top = "50%";
noBtn.style.transform = "translate(-50%, -50%)";
noBtn.style.zIndex = "9999";
noBtn.style.padding = "10px 18px";
noBtn.style.borderRadius = "999px";
noBtn.style.border = "0";
noBtn.style.cursor = "pointer";

// move function
function moveNo() {
  const boxRect = box.getBoundingClientRect();
  const btnRect = noBtn.getBoundingClientRect();

  const maxX = boxRect.width - btnRect.width;
  const maxY = boxRect.height - btnRect.height;

  const x = Math.random() * maxX;
  const y = Math.random() * maxY;

  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
}

// run away on hover + touch
noBtn.addEventListener("mouseenter", moveNo);
noBtn.addEventListener("mouseover", moveNo);
noBtn.addEventListener("touchstart", (e) => {
  e.preventDefault();
  moveNo();
}, { passive: false });
        const hug = document.createElement('img');
        hug.id = "hug";
        hug.src = "hug.gif";
        hug.alt = "hug";

        btn.onclick = () => {
          hug.style.display = "block";
        };

        box.appendChild(h2);
box.appendChild(btn);     // YES
box.appendChild(noBtn);  // NO (runner)
        box.appendChild(hug); // GIF
        mediaWrap.appendChild(box);

        if(timer) clearTimeout(timer);
      }
    }

    function scheduleNext(ms){
      if(timer) clearTimeout(timer);
      timer = setTimeout(()=>{
        i = Math.min(i+1, sequence.length-1);
        showSlide(i);
      }, ms);
    }

    function start(){
      if(started) return;
      started = true;
      startOverlay.style.display='none';

      bgm.volume = 0.75;
      bgm.play().catch(()=>{});

      showSlide(i);
    }

    musicBtn.addEventListener('click', ()=>{
      if(bgm.paused){ bgm.play().catch(()=>{}); }
      else { bgm.pause(); }
    });

    startBtn.addEventListener('click', start);
  </script>
</body>
</html>
